<div class="container mt-3">
  <h1 class="h1 mb-2"> Bienvenue <%= @current_user.first_name %> </h1>

  <p class="p"> Un de tes amis fête bientôt son anniversaire ? <br> Offre-lui une expérience unique avec BE MY BEST ! </p>


  <% if @current_user_projects.empty? %>

    <%= link_to "Démarre ton 1er jeu !", new_project_path, class: "btn btn-flat w-100"%>

  <% else %>

    <%= link_to "Démarre un nouveau jeu !", new_project_path, class: "btn btn-flat w-100 my-2"%>

    <div class="title-jeux">
      <h2 class="h2"> <i class="fa-solid fa-puzzle-piece"></i> Tes jeux déjà créés : </h2>
    </div>

    <div class="cards" data-controller="favorite">
      <% @current_user_projects.each do |project| %>
        <div class="card-category d-block m-3">

          <%= link_to project_path(project) do %>
            <div>

              <% if project.favorite %>
                  <i class="fa-solid fa-heart card-project-favorite" data-action="click->favorite#fav" data-favorite-project-id-param="<%= project.id %>" ></i>
              <% else %>
                  <i class="fa-regular fa-heart card-project-favorite" data-action="click->favorite#fav" data-favorite-project-id-param="<%= project.id %>"></i>
              <% end %>

              <% if project.photo.attached? %>
                <%= cl_image_tag project.photo.key, class: "img-card d-block w-100"%>
              <% end %>

            </div>
            <div class="card-project-relative card-description-p">
              <h2 class="h2"> <%= project.title %> </h2>
              <p class="p">  <%= project.description.length > 25 ? "#{project.description.first(25)}..." : project.description %></p>
            </div>

          <% end %>

          <%= link_to project_path(project), data: {turbo_method: :delete, turbo_confirm: "Confirmes-tu la suppression de ce projet ?"} do %>
            <i class="fa-solid fa-trash-can card-project-trash"></i>
          <% end %>

        </div>
      <% end %>
    </div>
  <% end %>
</div>
